<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ·˜å·¥å‚æµç¨‹å›¾ - äº¤äº’å¼åŠ¨ç”»</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            max-width: 1400px;
            width: 95%;
            margin: 0 auto;
        }
        .intro {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }
        .intro:hover {
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            transform: translateY(-2px);
        }
        .intro h1 {
            color: #4169E1;
            margin-top: 0;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 15px;
        }
        .intro h2 {
            color: #9370DB;
            margin-top: 25px;
        }
        .policy-cards {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        .policy-card {
            flex: 1;
            min-width: 250px;
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #9370DB;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        .policy-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }
        .policy-card h3 {
            margin-top: 0;
            color: #333;
        }
        #flowchart-container {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin: 0 auto;
            width: 100%;
            position: relative;
        }
        .flow-title {
            text-align: center;
            color: #4169E1;
            margin: 30px 0 15px 0;
            font-size: 1.8rem;
            font-weight: 600;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
            position: relative;
            overflow: hidden;
        }
        .flow-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: -100%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #9370DB, transparent);
            animation: flow-line 3s ease infinite;
        }
        @keyframes flow-line {
            0% { left: -100%; }
            50% { left: 100%; }
            100% { left: 100%; }
        }
        #loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
            z-index: 100;
            background-color: rgba(255,255,255,0.8);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.05); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }
        .error-message {
            display: none;
            text-align: center;
            color: #ff4d4f;
            margin: 20px 0;
            font-size: 1.2rem;
            padding: 15px;
            border: 1px solid #ffccc7;
            border-radius: 8px;
            background-color: #fff2f0;
        }
        
        /* SVGäº¤äº’æ ·å¼ */
        .loading-animation {
            text-align: center;
            padding: 20px;
            font-size: 1.2rem;
            color: #666;
        }
        
        .loading-dots {
            display: inline-block;
            min-width: 30px;
        }
        
        #tooltip {
            position: absolute;
            display: none;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            z-index: 1000;
            max-width: 250px;
            font-size: 14px;
            transform: translate(-50%, -100%);
        }
        
        #node-details {
            display: none;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        #node-details h3 {
            margin-top: 0;
            color: #4169E1;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        
        #node-details ul {
            list-style: none;
            padding: 0;
            margin: 15px 0 0 0;
        }
        
        #node-details li {
            padding: 8px 0;
            border-bottom: 1px solid #f5f5f5;
        }
        
        #node-details li:last-child {
            border-bottom: none;
        }
        
        .node-highlight {
            filter: drop-shadow(0 0 8px rgba(65, 105, 225, 0.6));
            transform: scale(1.1);
            transition: all 0.3s ease;
        }
        .app-screenshot {
            position: relative;
            max-width: 400px;
            margin: 20px auto;
            transition: transform 0.5s ease;
            cursor: pointer;
        }
        .app-screenshot:hover {
            transform: scale(1.05);
        }
        .app-screenshot::after {
            content: 'ç‚¹å‡»æ”¾å¤§';
            position: absolute;
            bottom: 10px;
            right: 10px;
            background-color: rgba(0,0,0,0.6);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .app-screenshot:hover::after {
            opacity: 1;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .modal.active {
            display: flex;
            opacity: 1;
        }
        .modal-content {
            max-width: 90%;
            max-height: 90%;
            position: relative;
        }
        .modal-close {
            position: absolute;
            top: -40px;
            right: 0;
            color: white;
            font-size: 30px;
            cursor: pointer;
        }
        .highlight-section {
            position: relative;
            overflow: hidden;
        }
        .highlight-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(147, 112, 219, 0.2), transparent);
            animation: highlight-sweep 3s ease infinite;
            pointer-events: none;
        }
        @keyframes highlight-sweep {
            0% { left: -100%; }
            50% { left: 100%; }
            100% { left: 100%; }
        }
        /* SVGäº¤äº’æ ·å¼ */
        .node-highlight {
            transform: scale(1.1);
            filter: drop-shadow(0 0 5px rgba(65, 105, 225, 0.7));
            transition: all 0.3s ease;
        }
        .path-highlight {
            stroke-width: 4px;
            filter: drop-shadow(0 0 3px rgba(65, 105, 225, 0.5));
        }
        .path-animation {
            stroke-dasharray: 10;
            animation: dash 20s linear infinite;
        }
        @keyframes dash {
            to {
                stroke-dashoffset: 1000;
            }
        }
        .node-active {
            transform: scale(1.15);
            filter: drop-shadow(0 0 8px rgba(65, 105, 225, 0.9));
        }
        .detail-btn:hover {
            background-color: #3a5fc8;
        }
        .close-details:hover {
            color: #4169E1;
        }
        
        /* åŠ¨ç”»åºåˆ—æ•ˆæœ */
        .flow-sequence-animation .node,
        .flow-sequence-animation .flow-path,
        .flow-sequence-animation text[for] {
            opacity: 0.3;
            transition: all 0.5s ease;
        }
        
        .flow-sequence-animation .active-node {
            opacity: 1;
            transform: scale(1.1);
            filter: drop-shadow(0 0 10px rgba(65, 105, 225, 0.8));
            transition: all 0.5s ease;
        }
        
        .flow-sequence-animation .active-path {
            opacity: 1;
            stroke-width: 5px;
            filter: drop-shadow(0 0 5px rgba(65, 105, 225, 0.6));
            stroke-dasharray: 10;
            animation: dash 20s linear infinite;
        }
        
        .flow-sequence-animation text.active-text {
            opacity: 1;
            font-weight: bold;
            fill: #4169E1 !important;
        }
        
        /* æ§åˆ¶é¢æ¿ */
        .flow-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            gap: 10px;
        }
        
        .flow-controls button {
            background-color: #4169E1;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .flow-controls button:hover {
            background-color: #3a5fc8;
            transform: translateY(-2px);
        }
        
        .flow-controls button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .step-indicator {
            padding: 5px 10px;
            border-radius: 5px;
            background-color: #f0f0f0;
            font-weight: bold;
            min-width: 60px;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .policy-cards {
                flex-direction: column;
            }
            .policy-card {
                min-width: auto;
            }
            #node-details {
                width: 80%;
                max-width: 300px;
            }
        }
        
        /* èŠ‚ç‚¹åŠ¨ç”»å’Œæ•ˆæœ */
        .node {
            transition: all 0.5s ease;
            cursor: pointer;
        }
        
        .node:hover {
            transform: scale(1.05);
            filter: drop-shadow(0 0 8px rgba(65, 105, 225, 0.6));
        }
        
        .node-highlight {
            transform: scale(1.1);
            filter: drop-shadow(0 0 10px rgba(65, 105, 225, 0.8));
        }
        
        .node-active {
            transform: scale(1.1);
            filter: drop-shadow(0 0 12px rgba(65, 105, 225, 0.9));
        }

        /* è·¯å¾„åŠ¨ç”» */
        .path-animation {
            stroke-dasharray: 10;
            animation: dash 30s linear infinite;
        }
        
        @keyframes dash {
            to {
                stroke-dashoffset: -1000;
            }
        }
        
        .path-highlight {
            stroke-width: 5px;
            filter: drop-shadow(0 0 3px rgba(65, 105, 225, 0.5));
        }
    </style>
</head>
<body>
    <div id="loading">åŠ è½½ä¸­<span class="loading-dots">...</span></div>
    <div class="container">
        <div class="intro highlight-section">
            <p>æ·˜å·¥å‚æ˜¯é˜¿é‡Œå·´å·´æ——ä¸‹çš„ä¸€ç§ä»¥å·¥å‚ç›´è¿æ¶ˆè´¹è€…ä¸ºæ ¸å¿ƒçš„ç”µå•†å¹³å°ï¼Œå…¶æ¨¡å¼é€šå¸¸è¢«ç§°ä¸ºM2Cï¼ˆManufacturer-to-Consumerï¼‰ã€‚é€šè¿‡å‡å°‘ä¸­é—´ç¯èŠ‚ï¼Œå¹³å°ç›´æ¥å¯¹æ¥å·¥å‚å’Œæ¶ˆè´¹è€…ï¼Œä»è€Œå®ç°é™æœ¬å¢æ•ˆã€‚</p>
            
            <div class="policy-container">
                <h2>ä½£é‡‘æ‰¶æŒæ”¿ç­–</h2>
                <div class="policy-cards">
                    <div class="policy-card" id="policy1">
                        <h3>ğŸ’° å†·å¯åŠ¨é˜¶æ®µä½ä½£é‡‘</h3>
                        <p>æ–°å“åœ¨ä¸Šæ¶åˆæœŸï¼ˆ60å¤©å†…ã€7å¤©æ—¥å‡è®¢å•ä¸è¶³100å•ï¼‰ä»…æ”¶å–0.6%çš„å›ºå®šä½£é‡‘ï¼Œç›¸æ¯”ä¼ ç»Ÿ11%å·¦å³çš„ä½£é‡‘ï¼Œä¼˜æƒ å¹…åº¦æœ€é«˜å¯è¾¾95%ã€‚</p>
                    </div>
                    <div class="policy-card" id="policy2">
                        <h3>ğŸ”„ åç»­è®¢å•ä¼˜æƒ æŠ˜æ‰£</h3>
                        <p>å†·å¯åŠ¨æœŸç»“æŸåï¼Œæ™®é€šå•†å“è¿˜å¯äº«å—ç±»ç›®ä½£é‡‘æŠ˜æ‰£ï¼Œæœ€é«˜ä¼˜æƒ å¯è¾¾50%ï¼Œè¿›ä¸€æ­¥å‹ç¼©é”€å”®æˆæœ¬ã€‚</p>
                    </div>
                    <div class="policy-card" id="policy3">
                        <h3>ğŸ“ˆ é™ä½å®šä»·å‹åŠ›ä¸æå‡åˆ©æ¶¦</h3>
                        <p>ç”±äºä½£é‡‘æ”¯å‡ºå‡å°‘ï¼Œå•†å®¶åœ¨å®šä»·æ—¶å¯ä»¥æ›´æœ‰ç«äº‰åŠ›ï¼ŒåŒæ—¶ä¿ç•™æ›´å¤šåˆ©æ¶¦ç©ºé—´ï¼Œæé«˜æ•´ä½“è¿è¥æ•ˆç‡å’Œå¸‚åœºç«äº‰åŠ›ã€‚</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="highlight-section">
            <div id="flowchart-container">
                <h2 class="flow-title">æ·˜å·¥å‚ä¸šåŠ¡æµç¨‹å…¨æ™¯å›¾</h2>
                <div class="flow-controls">
                    <button id="play-btn">â–¶ï¸ æ’­æ”¾æµç¨‹</button>
                    <button id="reset-btn">ğŸ”„ é‡ç½®</button>
                    <button id="prev-btn" disabled>â—€ï¸ ä¸Šä¸€æ­¥</button>
                    <span class="step-indicator">0/7</span>
                    <button id="next-btn">â–¶ï¸ ä¸‹ä¸€æ­¥</button>
                </div>
                <div id="svg-container" style="width:100%; max-width:1200px; margin:0 auto; position:relative;">
                    <!-- SVGå°†é€šè¿‡JavaScriptåŠ è½½ -->
                </div>
                <div id="tooltip" style="display:none; position:absolute; background-color:white; padding:10px; border-radius:5px; box-shadow:0 2px 8px rgba(0,0,0,0.2); z-index:100; max-width:300px; font-size:14px;"></div>
                <div id="node-details" style="display:none; position:absolute; background-color:white; padding:15px; border-radius:8px; box-shadow:0 4px 12px rgba(0,0,0,0.15); z-index:101; width:300px; font-size:14px;">
                    <span class="close-details" style="position:absolute; right:10px; top:5px; cursor:pointer; font-size:18px;">&times;</span>
                    <h3 style="margin-top:0; color:#4169E1;"></h3>
                    <p></p>
                    <div class="detail-actions" style="margin-top:10px;">
                        <button class="detail-btn" style="background-color:#4169E1; color:white; border:none; padding:5px 10px; border-radius:4px; cursor:pointer;">äº†è§£æ›´å¤š</button>
                    </div>
                </div>
                <div id="step-description" style="margin-top:20px; padding:20px; background-color:#f8f9fa; border-radius:12px; text-align:left; display:none; box-shadow: 0 4px 12px rgba(0,0,0,0.1); border-left: 5px solid #4169E1;">
                    <h3 style="margin-top:0; color:#4169E1; font-size: 20px; border-bottom: 1px solid #e0e0e0; padding-bottom: 10px;">æµç¨‹æ­¥éª¤è¯¦è§£</h3>
                    <p style="font-size:16px; line-height: 1.6; color: #333;"></p>
                </div>
                <div id="svg-error" class="error-message">
                    å›¾è¡¨åŠ è½½å¤±è´¥ã€‚è¯·ç¡®ä¿graph.svgæ–‡ä»¶å­˜åœ¨å¹¶ä¸”å¯è®¿é—®ã€‚
                </div>
            </div>
        </div>

        <div class="intro highlight-section">
            <h2 class="flow-title">æ·˜å·¥å‚APPç•Œé¢å±•ç¤º</h2>
            <div style="display: flex; flex-direction: column; align-items: center;">
                <div class="app-screenshot" id="appScreenshot">
                    <img src="3326ac26358e1b4514ac9ac95f742b9.jpg" alt="æ·˜å·¥å‚APPç•Œé¢" style="max-width: 100%; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.15);">
                </div>
                <p style="text-align: center; max-width: 600px;">ä¸Šå›¾å±•ç¤ºäº†æ·˜å·¥å‚APPçš„å®é™…ç”¨æˆ·ç•Œé¢ï¼ŒåŒ…å«äº†å•†å“åˆ†ç±»ã€ä¼˜æƒ æ´»åŠ¨å’Œå•†å“å±•ç¤ºç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚é€šè¿‡APPï¼Œæ¶ˆè´¹è€…å¯ä»¥ç›´æ¥æµè§ˆå’Œè´­ä¹°å·¥å‚ç›´ä¾›çš„ä¼˜è´¨ä½ä»·å•†å“ï¼Œäº«å—å¹³å°æä¾›çš„å„ç§ä¼˜æƒ æ”¿ç­–ã€‚</p>
            </div>
        </div>
        
        <footer style="text-align: center; margin-top: 50px; padding: 20px; border-top: 1px solid #eee;">
            <p>Â© 2023 æ·˜å·¥å‚æµç¨‹å›¾é¡¹ç›® | <a href="https://github.com/xl76888/taofactory" target="_blank" style="color: #4169E1; text-decoration: none;">GitHub ä»“åº“</a></p>
        </footer>
    </div>

    <!-- å›¾ç‰‡æŸ¥çœ‹æ¨¡æ€æ¡† -->
    <div class="modal" id="imageModal">
        <div class="modal-content">
            <span class="modal-close" id="closeModal">&times;</span>
            <img id="modalImage" src="" alt="æ”¾å¤§å›¾ç‰‡" style="max-width: 100%; max-height: 90vh;">
        </div>
    </div>

    <script>
        // é¡µé¢åŠ è½½åŠ¨ç”»
        document.addEventListener('DOMContentLoaded', function() {
            const loading = document.getElementById('loading');
            loading.style.display = 'block';
            
            // åŠ è½½SVG
            loadInteractiveSVG();
            
            // æ¨¡æ‹ŸåŠ è½½è¿‡ç¨‹
            setTimeout(function() {
                loading.style.display = 'none';
                
                // æ·»åŠ å…¥åœºåŠ¨ç”»
                const sections = document.querySelectorAll('.intro, #flowchart-container');
                sections.forEach((section, index) => {
                    setTimeout(() => {
                        section.style.opacity = '0';
                        section.style.transform = 'translateY(20px)';
                        section.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                        
                        setTimeout(() => {
                            section.style.opacity = '1';
                            section.style.transform = 'translateY(0)';
                        }, 100);
                    }, index * 200);
                });                
                // è®¾ç½®å…³é—­æŒ‰é’®äº‹ä»¶
                setupCloseDetailsHandler();
            }, 1000);
            
            // åŠ è½½ä¸­åŠ¨ç”»
            const loadingDots = document.querySelector('.loading-dots');
            let dotCount = 3;
            setInterval(() => {
                dotCount = (dotCount % 3) + 1;
                loadingDots.textContent = '.'.repeat(dotCount);
            }, 500);
        });
        
        // æ·»åŠ æµç¨‹åŠ¨ç”»æ§åˆ¶
        function setupFlowAnimation(svgDoc) {
            // æµç¨‹æ­¥éª¤å®šä¹‰
            const flowSteps = [
                {
                    step: 1,
                    nodes: ['factory-node'],
                    paths: ['path-factory-to-platform'],
                    texts: ['text-factory-to-platform'],
                    description: 'ã€äº§å“ä¸Šæ¶ã€‘å·¥å‚å°†ç”Ÿäº§çš„å•†å“ä¿¡æ¯ä¸Šä¼ è‡³æ·˜å·¥å‚å¹³å°ï¼ŒåŒ…æ‹¬å•†å“å›¾ç‰‡ã€è¯¦ç»†æè¿°ã€è§„æ ¼å‚æ•°ã€ä»·æ ¼å’Œåº“å­˜ç­‰ä¿¡æ¯ã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨å®¡æ ¸å¹¶åˆ†ç±»å½’æ¡£ã€‚'
                },
                {
                    step: 2,
                    nodes: ['factory-node', 'platform-node'],
                    paths: ['path-factory-to-platform', 'path-platform-to-consumer'],
                    texts: ['text-factory-to-platform', 'text-platform-to-consumer'],
                    description: 'ã€å•†å“å±•ç¤ºã€‘æ·˜å·¥å‚å¹³å°å¯¹å•†å“è¿›è¡Œå®¡æ ¸å’Œä¼˜åŒ–å±•ç¤ºï¼Œæ¶ˆè´¹è€…å¯ä»¥åœ¨å¹³å°APPæˆ–ç½‘ç«™ä¸Šæµè§ˆå„ç±»äº§å“ï¼ŒæŸ¥çœ‹è¯¦æƒ…ã€è¯„ä»·å’Œå‚æ•°å¯¹æ¯”ã€‚å•†å“ä¿¡æ¯åŒ…å«å·¥å‚ç›´ä¾›æ ‡è¯†ï¼Œçªæ˜¾ä»·æ ¼ä¼˜åŠ¿ã€‚'
                },
                {
                    step: 3,
                    nodes: ['platform-node', 'consumer-node'],
                    paths: ['path-platform-to-consumer', 'path-consumer-to-platform'],
                    texts: ['text-platform-to-consumer', 'text-consumer-to-platform'],
                    description: 'ã€ä¸‹å•è´­ä¹°ã€‘æ¶ˆè´¹è€…é€‰æ‹©å¿ƒä»ªçš„å•†å“ï¼Œç¡®è®¤è§„æ ¼ã€æ•°é‡ååŠ å…¥è´­ç‰©è½¦å¹¶æäº¤è®¢å•ã€‚å¹³å°ä¼šè‡ªåŠ¨æ ¡éªŒåº“å­˜ï¼Œç”Ÿæˆè®¢å•ç¼–å·ï¼Œå¹¶ç­‰å¾…ä»˜æ¬¾ç¡®è®¤ã€‚'
                },
                {
                    step: 4,
                    nodes: ['platform-node', 'consumer-node', 'payment-node'],
                    paths: ['path-consumer-to-platform', 'path-platform-to-payment'],
                    texts: ['text-consumer-to-platform', 'text-platform-to-payment'],
                    description: 'ã€æ”¯ä»˜å¤„ç†ã€‘è®¢å•æäº¤åï¼Œå¹³å°å¼•å¯¼æ¶ˆè´¹è€…é€šè¿‡æ”¯ä»˜å®ã€å¾®ä¿¡æ”¯ä»˜ç­‰å¤šç§æ–¹å¼å®Œæˆæ”¯ä»˜æµç¨‹ã€‚æ”¯ä»˜ç³»ç»ŸéªŒè¯äº¤æ˜“å®‰å…¨ï¼Œç¡®è®¤æ”¯ä»˜æˆåŠŸåé€šçŸ¥å¹³å°ï¼Œèµ„é‡‘æš‚ç”±å¹³å°æ‰˜ç®¡ã€‚'
                },
                {
                    step: 5,
                    nodes: ['platform-node', 'payment-node', 'factory-node'],
                    paths: ['path-platform-to-payment', 'path-platform-to-factory'],
                    texts: ['text-platform-to-payment', 'text-platform-to-factory'],
                    description: 'ã€è®¢å•é€šçŸ¥ã€‘æ”¯ä»˜å®Œæˆåï¼Œå¹³å°å°†è®¢å•è¯¦ç»†ä¿¡æ¯ï¼ˆåŒ…æ‹¬æ”¶è´§åœ°å€ã€è”ç³»æ–¹å¼ã€å•†å“è§„æ ¼ã€æ•°é‡ç­‰ï¼‰å®æ—¶é€šçŸ¥ç»™å·¥å‚ç®¡ç†ç³»ç»Ÿï¼Œå·¥å‚ç¡®è®¤è®¢å•å¹¶å¼€å§‹å¤‡è´§ã€‚'
                },
                {
                    step: 6,
                    nodes: ['factory-node', 'logistics-node'],
                    paths: ['path-platform-to-factory', 'path-factory-to-logistics'],
                    texts: ['text-platform-to-factory', 'text-factory-to-logistics'],
                    description: 'ã€å•†å“å‘è´§ã€‘å·¥å‚æ ¹æ®è®¢å•ä¿¡æ¯æŒ‘é€‰ã€åŒ…è£…å•†å“ï¼Œç”Ÿæˆç‰©æµé¢å•ï¼Œå¹¶äº¤ä»˜ç»™åˆä½œç‰©æµæœåŠ¡å•†è¿›è¡Œé…é€ã€‚å·¥å‚åŒæ—¶æ›´æ–°è®¢å•çŠ¶æ€ï¼Œå½•å…¥ç‰©æµå•å·ï¼Œæ¶ˆè´¹è€…å¯å®æ—¶æŸ¥çœ‹ç‰©æµä¿¡æ¯ã€‚'
                },
                {
                    step: 7,
                    nodes: ['logistics-node', 'consumer-node'],
                    paths: ['path-factory-to-logistics', 'path-logistics-to-consumer'],
                    texts: ['text-factory-to-logistics', 'text-logistics-to-consumer'],
                    description: 'ã€é…é€åˆ°å®¶ã€‘ç‰©æµæœåŠ¡å•†é€šè¿‡å…¨å›½é…é€ç½‘ç»œå°†å•†å“é€è¾¾æ¶ˆè´¹è€…æ‰‹ä¸­ã€‚æ¶ˆè´¹è€…ç­¾æ”¶å•†å“ï¼Œç¡®è®¤æ”¶è´§åå¹³å°å°†è´§æ¬¾ï¼ˆæ‰£é™¤å¹³å°ä½£é‡‘ï¼‰è½¬ç»™å·¥å‚ï¼Œäº¤æ˜“æµç¨‹å®Œæˆã€‚å¦‚æœ‰é€€æ¢è´§éœ€æ±‚ï¼Œå¯åœ¨å¹³å°å‘èµ·å”®åæœåŠ¡ã€‚'
                }
            ];
            
            let currentStep = 0;
            const totalSteps = flowSteps.length;
            
            // è·å–æ§åˆ¶æŒ‰é’®
            const playBtn = document.getElementById('play-btn');
            const resetBtn = document.getElementById('reset-btn');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const stepIndicator = document.querySelector('.step-indicator');
            const stepDescription = document.getElementById('step-description');
            
            // æ·»åŠ æµç¨‹åºåˆ—åŠ¨ç”»ç±»
            svgDoc.classList.add('flow-sequence-animation');
            
            // é‡ç½®æµç¨‹
            function resetFlow() {
                currentStep = 0;
                stepIndicator.textContent = `${currentStep}/${totalSteps}`;
                prevBtn.disabled = true;
                nextBtn.disabled = false;
                
                // é‡ç½®æ‰€æœ‰èŠ‚ç‚¹å’Œè·¯å¾„
                const allNodes = svgDoc.querySelectorAll('.node');
                const allPaths = svgDoc.querySelectorAll('.flow-path');
                const allTexts = svgDoc.querySelectorAll('text[for]');
                
                allNodes.forEach(node => {
                    node.classList.remove('active-node');
                });
                
                allPaths.forEach(path => {
                    path.classList.remove('active-path');
                });
                
                allTexts.forEach(text => {
                    text.classList.remove('active-text');
                });
                
                stepDescription.style.display = 'none';
            }
            
            // æ˜¾ç¤ºæŒ‡å®šæ­¥éª¤
            function showStep(step) {
                // é‡ç½®æ‰€æœ‰èŠ‚ç‚¹å’Œè·¯å¾„
                resetFlow();
                
                // ä¾æ¬¡æ¿€æ´»åˆ°å½“å‰æ­¥éª¤çš„æ‰€æœ‰èŠ‚ç‚¹å’Œè·¯å¾„
                for (let i = 0; i <= step; i++) {
                    const flowStep = flowSteps[i];
                    
                    // æ¿€æ´»èŠ‚ç‚¹
                    flowStep.nodes.forEach(nodeId => {
                        const node = svgDoc.querySelector(`#${nodeId}`);
                        if (node) node.classList.add('active-node');
                    });
                    
                    // æ¿€æ´»è·¯å¾„
                    flowStep.paths.forEach(pathId => {
                        const path = svgDoc.querySelector(`#${pathId}`);
                        if (path) path.classList.add('active-path');
                    });
                    
                    // æ¿€æ´»æ–‡æœ¬
                    flowStep.texts.forEach(textId => {
                        const text = svgDoc.querySelector(`#${textId}`);
                        if (text) text.classList.add('active-text');
                    });
                }
                
                // æ›´æ–°æ­¥éª¤æŒ‡ç¤ºå™¨
                currentStep = step;
                stepIndicator.textContent = `${currentStep}/${totalSteps}`;
                
                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                prevBtn.disabled = currentStep === 0;
                nextBtn.disabled = currentStep === totalSteps;
                
                // æ˜¾ç¤ºå½“å‰æ­¥éª¤æè¿°
                if (currentStep > 0) {
                    const description = flowSteps[currentStep - 1].description;
                    stepDescription.querySelector('p').textContent = description;
                    stepDescription.style.display = 'block';
                } else {
                    stepDescription.style.display = 'none';
                }
            }
            
            // ä¸‹ä¸€æ­¥
            function nextStep() {
                if (currentStep < totalSteps) {
                    currentStep++;
                    showStep(currentStep);
                }
            }
            
            // ä¸Šä¸€æ­¥
            function prevStep() {
                if (currentStep > 0) {
                    currentStep--;
                    showStep(currentStep);
                }
            }
            
            // è‡ªåŠ¨æ’­æ”¾
            let playInterval;
            function playFlow() {
                // å¦‚æœå·²ç»åœ¨æ’­æ”¾ï¼Œåˆ™åœæ­¢
                if (playInterval) {
                    clearInterval(playInterval);
                    playInterval = null;
                    playBtn.textContent = 'â–¶ï¸ æ’­æ”¾æµç¨‹';
                    return;
                }
                
                // å¼€å§‹æ’­æ”¾
                resetFlow();
                playBtn.textContent = 'â¸ï¸ æš‚åœæ’­æ”¾';
                
                nextStep(); // ç«‹å³æ˜¾ç¤ºç¬¬ä¸€æ­¥
                
                playInterval = setInterval(() => {
                    if (currentStep >= totalSteps) {
                        clearInterval(playInterval);
                        playInterval = null;
                        playBtn.textContent = 'â–¶ï¸ æ’­æ”¾æµç¨‹';
                    } else {
                        nextStep();
                    }
                }, 3000); // æ¯3ç§’åˆ‡æ¢åˆ°ä¸‹ä¸€æ­¥
            }
            
            // æ·»åŠ æŒ‰é’®äº‹ä»¶ç›‘å¬
            playBtn.addEventListener('click', playFlow);
            resetBtn.addEventListener('click', resetFlow);
            prevBtn.addEventListener('click', prevStep);
            nextBtn.addEventListener('click', nextStep);
            
            // åˆå§‹åŒ–æµç¨‹åŠ¨ç”»
            resetFlow();
        }
        
        // åŠ è½½äº¤äº’å¼SVG
        function loadInteractiveSVG() {
            const svgContainer = document.getElementById('svg-container');
            const tooltip = document.getElementById('tooltip');
            const nodeDetails = document.getElementById('node-details');
            const svgError = document.getElementById('svg-error');
            
            // æ˜¾ç¤ºåŠ è½½ä¸­çŠ¶æ€
            svgContainer.innerHTML = '<div class="loading-animation">åŠ è½½ä¸­<span class="loading-dots">...</span></div>';
            
            try {
                // åˆ›å»ºå†…è”SVGå†…å®¹è€Œä¸æ˜¯åŠ è½½å¤–éƒ¨æ–‡ä»¶
                svgContainer.innerHTML = `
                <?xml version="1.0" encoding="UTF-8"?>
                <svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800">
                  <!-- èƒŒæ™¯ -->
                  <rect width="100%" height="100%" fill="#ffffff"/>
                  
                  <!-- æ ‡é¢˜ -->
                  <text x="600" y="50" font-family="Microsoft YaHei, sans-serif" font-size="32" font-weight="bold" text-anchor="middle" fill="#4169E1">æ·˜å·¥å‚ä¸šåŠ¡æµç¨‹å…¨æ™¯å›¾</text>
                  
                  <!-- èŠ‚ç‚¹æ ·å¼å®šä¹‰ -->
                  <defs>
                    <!-- å·¥å‚èŠ‚ç‚¹ -->
                    <symbol id="factory" viewBox="0 0 100 100">
                      <rect x="10" y="40" width="80" height="50" fill="#f0e6ff" stroke="#9370DB" stroke-width="2"/>
                      <polygon points="10,40 50,10 90,40" fill="#f0e6ff" stroke="#9370DB" stroke-width="2"/>
                      <rect x="30" y="60" width="15" height="30" fill="#ffffff" stroke="#9370DB" stroke-width="1"/>
                      <rect x="55" y="60" width="15" height="30" fill="#ffffff" stroke="#9370DB" stroke-width="1"/>
                    </symbol>
                    
                    <!-- å¹³å°èŠ‚ç‚¹ -->
                    <symbol id="platform" viewBox="0 0 100 100">
                      <rect x="10" y="20" width="80" height="60" rx="10" ry="10" fill="#e6f0ff" stroke="#4169E1" stroke-width="2"/>
                      <rect x="20" y="30" width="60" height="30" rx="5" ry="5" fill="#ffffff" stroke="#4169E1" stroke-width="1"/>
                      <rect x="35" y="70" width="30" height="5" rx="2" ry="2" fill="#4169E1"/>
                    </symbol>
                    
                    <!-- æ¶ˆè´¹è€…èŠ‚ç‚¹ -->
                    <symbol id="consumer" viewBox="0 0 100 100">
                      <circle cx="50" cy="35" r="20" fill="#ffe6e6" stroke="#FF6B6B" stroke-width="2"/>
                      <path d="M30,95 L70,95 L65,55 L35,55 Z" fill="#ffe6e6" stroke="#FF6B6B" stroke-width="2"/>
                    </symbol>
                    
                    <!-- ç‰©æµèŠ‚ç‚¹ -->
                    <symbol id="logistics" viewBox="0 0 100 100">
                      <rect x="10" y="30" width="80" height="40" fill="#e6ffe6" stroke="#4CAF50" stroke-width="2"/>
                      <circle cx="30" cy="70" r="10" fill="#ffffff" stroke="#4CAF50" stroke-width="2"/>
                      <circle cx="70" cy="70" r="10" fill="#ffffff" stroke="#4CAF50" stroke-width="2"/>
                      <rect x="20" y="20" width="20" height="10" fill="#e6ffe6" stroke="#4CAF50" stroke-width="2"/>
                    </symbol>
                    
                    <!-- æ”¯ä»˜èŠ‚ç‚¹ -->
                    <symbol id="payment" viewBox="0 0 100 100">
                      <circle cx="50" cy="50" r="40" fill="#fff2e6" stroke="#FF9F43" stroke-width="2"/>
                      <text x="50" y="45" font-family="Microsoft YaHei, sans-serif" font-size="40" text-anchor="middle" fill="#FF9F43">Â¥</text>
                      <circle cx="50" cy="50" r="30" fill="none" stroke="#FF9F43" stroke-width="1" stroke-dasharray="5,3"/>
                    </symbol>
                    
                    <!-- ç®­å¤´æ ‡è®° -->
                    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                      <polygon points="0 0, 10 3.5, 0 7" fill="#4169E1"/>
                    </marker>
                    <marker id="arrowhead-purple" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                      <polygon points="0 0, 10 3.5, 0 7" fill="#9370DB"/>
                    </marker>
                    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                      <polygon points="0 0, 10 3.5, 0 7" fill="#FF6B6B"/>
                    </marker>
                    <marker id="arrowhead-orange" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                      <polygon points="0 0, 10 3.5, 0 7" fill="#FF9F43"/>
                    </marker>
                    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                      <polygon points="0 0, 10 3.5, 0 7" fill="#4CAF50"/>
                    </marker>
                    
                    <!-- æµç¨‹å·æ ·å¼ -->
                    <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
                      <feGaussianBlur stdDeviation="2" result="blur"/>
                      <feComposite in="SourceGraphic" in2="blur" operator="over"/>
                    </filter>
                  </defs>
                  
                  <!-- ä¸»è¦èŠ‚ç‚¹ -->
                  <g id="factory-node" class="node">
                    <use href="#factory" x="150" y="200" width="100" height="100"/>
                    <text x="200" y="320" font-family="Microsoft YaHei, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333333">å·¥å‚</text>
                  </g>
                  
                  <g id="platform-node" class="node">
                    <use href="#platform" x="550" y="200" width="100" height="100"/>
                    <text x="600" y="320" font-family="Microsoft YaHei, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333333">æ·˜å·¥å‚å¹³å°</text>
                  </g>
                  
                  <g id="consumer-node" class="node">
                    <use href="#consumer" x="950" y="200" width="100" height="100"/>
                    <text x="1000" y="320" font-family="Microsoft YaHei, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333333">æ¶ˆè´¹è€…</text>
                  </g>
                  
                  <g id="logistics-node" class="node">
                    <use href="#logistics" x="550" y="450" width="100" height="100"/>
                    <text x="600" y="570" font-family="Microsoft YaHei, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333333">ç‰©æµé…é€</text>
                  </g>
                  
                  <g id="payment-node" class="node">
                    <use href="#payment" x="550" y="650" width="100" height="100"/>
                    <text x="600" y="770" font-family="Microsoft YaHei, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333333">æ”¯ä»˜ç³»ç»Ÿ</text>
                  </g>
                  
                  <!-- æµç¨‹èƒŒæ™¯åŒºåŸŸ -->
                  <rect x="30" y="150" width="1140" height="350" fill="#f9f9f9" rx="20" ry="20" opacity="0.5"/>
                  
                  <!-- è¿æ¥çº¿å’Œæµç¨‹ -->
                  <!-- å·¥å‚åˆ°å¹³å° -->
                  <path id="path-factory-to-platform" class="flow-path" d="M250,250 L550,250" stroke="#9370DB" stroke-width="3" fill="none" marker-end="url(#arrowhead-purple)" stroke-dasharray="0"/>
                  <text id="text-factory-to-platform" for="path-factory-to-platform" x="400" y="230" font-family="Microsoft YaHei, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#9370DB">1. äº§å“ä¸Šæ¶</text>
                  <circle cx="400" cy="250" r="15" fill="#9370DB" opacity="0.8"/>
                  <text x="400" y="255" font-family="Microsoft YaHei, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white" filter="url(#glow)">1</text>
                  
                  <!-- å¹³å°åˆ°æ¶ˆè´¹è€… -->
                  <path id="path-platform-to-consumer" class="flow-path" d="M650,250 L950,250" stroke="#4169E1" stroke-width="3" fill="none" marker-end="url(#arrowhead-blue)" stroke-dasharray="0"/>
                  <text id="text-platform-to-consumer" for="path-platform-to-consumer" x="800" y="230" font-family="Microsoft YaHei, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#4169E1">2. å±•ç¤ºå•†å“</text>
                  <circle cx="800" cy="250" r="15" fill="#4169E1" opacity="0.8"/>
                  <text x="800" y="255" font-family="Microsoft YaHei, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white" filter="url(#glow)">2</text>
                  
                  <!-- æ¶ˆè´¹è€…åˆ°å¹³å° -->
                  <path id="path-consumer-to-platform" class="flow-path" d="M950,280 L650,280" stroke="#FF6B6B" stroke-width="3" fill="none" marker-end="url(#arrowhead-red)" stroke-dasharray="0"/>
                  <text id="text-consumer-to-platform" for="path-consumer-to-platform" x="800" y="310" font-family="Microsoft YaHei, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#FF6B6B">3. ä¸‹å•è´­ä¹°</text>
                  <circle cx="800" cy="280" r="15" fill="#FF6B6B" opacity="0.8"/>
                  <text x="800" y="285" font-family="Microsoft YaHei, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white" filter="url(#glow)">3</text>
                  
                  <!-- å¹³å°åˆ°æ”¯ä»˜ -->
                  <path id="path-platform-to-payment" class="flow-path" d="M600,300 L600,650" stroke="#FF9F43" stroke-width="3" fill="none" marker-end="url(#arrowhead-orange)" stroke-dasharray="5,3"/>
                  <text id="text-platform-to-payment" for="path-platform-to-payment" x="520" y="475" font-family="Microsoft YaHei, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#FF9F43">4. æ”¯ä»˜å¤„ç†</text>
                  <circle cx="600" cy="475" r="15" fill="#FF9F43" opacity="0.8"/>
                  <text x="600" y="480" font-family="Microsoft YaHei, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white" filter="url(#glow)">4</text>
                  
                  <!-- å¹³å°åˆ°å·¥å‚ -->
                  <path id="path-platform-to-factory" class="flow-path" d="M550,280 L250,280" stroke="#4169E1" stroke-width="3" fill="none" marker-end="url(#arrowhead-blue)" stroke-dasharray="0"/>
                  <text id="text-platform-to-factory" for="path-platform-to-factory" x="400" y="310" font-family="Microsoft YaHei, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#4169E1">5. è®¢å•é€šçŸ¥</text>
                  <circle cx="400" cy="280" r="15" fill="#4169E1" opacity="0.8"/>
                  <text x="400" y="285" font-family="Microsoft YaHei, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white" filter="url(#glow)">5</text>
                  
                  <!-- å·¥å‚åˆ°ç‰©æµ -->
                  <path id="path-factory-to-logistics" class="flow-path" d="M200,300 L200,500 L550,500" stroke="#4CAF50" stroke-width="3" fill="none" marker-end="url(#arrowhead-green)" stroke-dasharray="0"/>
                  <text id="text-factory-to-logistics" for="path-factory-to-logistics" x="350" y="480" font-family="Microsoft YaHei, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#4CAF50">6. å‘è´§</text>
                  <circle cx="350" cy="500" r="15" fill="#4CAF50" opacity="0.8"/>
                  <text x="350" y="505" font-family="Microsoft YaHei, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white" filter="url(#glow)">6</text>
                  
                  <!-- ç‰©æµåˆ°æ¶ˆè´¹è€… -->
                  <path id="path-logistics-to-consumer" class="flow-path" d="M650,500 L1000,500 L1000,300" stroke="#4CAF50" stroke-width="3" fill="none" marker-end="url(#arrowhead-green)" stroke-dasharray="0"/>
                  <text id="text-logistics-to-consumer" for="path-logistics-to-consumer" x="850" y="480" font-family="Microsoft YaHei, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#4CAF50">7. é…é€åˆ°å®¶</text>
                  <circle cx="850" cy="500" r="15" fill="#4CAF50" opacity="0.8"/>
                  <text x="850" y="505" font-family="Microsoft YaHei, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white" filter="url(#glow)">7</text>
                  
                  <!-- æµç¨‹åˆ†é˜¶æ®µè¯´æ˜ -->
                  <rect x="100" y="100" width="180" height="30" fill="#f0e6ff" rx="15" ry="15" opacity="0.8"/>
                  <text x="190" y="122" font-family="Microsoft YaHei, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#9370DB">å•†å“ä¸Šæ¶é˜¶æ®µ</text>
                  
                  <rect x="750" y="100" width="180" height="30" fill="#e6f0ff" rx="15" ry="15" opacity="0.8"/>
                  <text x="840" y="122" font-family="Microsoft YaHei, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#4169E1">äº¤æ˜“é˜¶æ®µ</text>
                  
                  <rect x="430" y="400" width="180" height="30" fill="#e6ffe6" rx="15" ry="15" opacity="0.8"/>
                  <text x="520" y="422" font-family="Microsoft YaHei, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#4CAF50">ç‰©æµé…é€é˜¶æ®µ</text>
                  
                  <!-- ä½£é‡‘æ”¿ç­–è¯´æ˜ -->
                  <g id="commission-policy" class="info-box">
                    <rect x="100" y="600" width="300" height="150" rx="10" ry="10" fill="#f8f9fa" stroke="#9370DB" stroke-width="2"/>
                    <text x="250" y="630" font-family="Microsoft YaHei, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#9370DB">ä½£é‡‘æ‰¶æŒæ”¿ç­–</text>
                    <text x="120" y="660" font-family="Microsoft YaHei, sans-serif" font-size="14" fill="#333333">â€¢ å†·å¯åŠ¨é˜¶æ®µï¼šä»…æ”¶å–0.6%å›ºå®šä½£é‡‘</text>
                    <text x="120" y="690" font-family="Microsoft YaHei, sans-serif" font-size="14" fill="#333333">â€¢ æ™®é€šå•†å“ï¼šäº«å—ç±»ç›®ä½£é‡‘æŠ˜æ‰£ï¼Œæœ€é«˜50%</text>
                    <text x="120" y="720" font-family="Microsoft YaHei, sans-serif" font-size="14" fill="#333333">â€¢ ç›¸æ¯”ä¼ ç»Ÿ11%ä½£é‡‘ï¼Œä¼˜æƒ å¹…åº¦æœ€é«˜95%</text>
                  </g>
                  
                  <!-- M2Cæ¨¡å¼è¯´æ˜ -->
                  <g id="m2c-benefits" class="info-box">
                    <rect x="800" y="600" width="300" height="150" rx="10" ry="10" fill="#f8f9fa" stroke="#4169E1" stroke-width="2"/>
                    <text x="950" y="630" font-family="Microsoft YaHei, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#4169E1">M2Cæ¨¡å¼ä¼˜åŠ¿</text>
                    <text x="820" y="660" font-family="Microsoft YaHei, sans-serif" font-size="14" fill="#333333">â€¢ å‡å°‘ä¸­é—´ç¯èŠ‚ï¼Œé™ä½æˆæœ¬</text>
                    <text x="820" y="690" font-family="Microsoft YaHei, sans-serif" font-size="14" fill="#333333">â€¢ å·¥å‚ç›´è¿æ¶ˆè´¹è€…ï¼Œæé«˜æ•ˆç‡</text>
                    <text x="820" y="720" font-family="Microsoft YaHei, sans-serif" font-size="14" fill="#333333">â€¢ æ¶ˆè´¹è€…è·å¾—æ›´ä¼˜æƒ çš„ä»·æ ¼</text>
                  </g>
                </svg>
                `;
                
                // è·å–SVGæ–‡æ¡£
                const svgDoc = svgContainer.querySelector('svg');
                if (!svgDoc) {
                    throw new Error('SVGå…ƒç´ æœªæ‰¾åˆ°');
                }
                
                svgDoc.style.width = '100%';
                svgDoc.style.height = 'auto';
                svgDoc.style.maxWidth = '1200px';
                svgDoc.style.transition = 'all 0.3s ease';
                svgDoc.style.margin = '0 auto';
                svgDoc.style.display = 'block';
                
                // ä¸ºå„ä¸ªèŠ‚ç‚¹æ·»åŠ äº¤äº’æ•ˆæœ
                addNodeInteractivity(svgDoc, 'factory', 'å·¥å‚', 'è´Ÿè´£ç”Ÿäº§å’Œå‘è´§å•†å“ï¼Œæ˜¯æ•´ä¸ªæµç¨‹çš„èµ·ç‚¹ã€‚å·¥å‚é€šè¿‡æ·˜å·¥å‚å¹³å°ç›´æ¥é¢å‘æ¶ˆè´¹è€…ï¼Œå‡å°‘ä¸­é—´ç¯èŠ‚ã€‚', {
                    title: 'å·¥å‚ä¼˜åŠ¿',
                    content: 'é€šè¿‡æ·˜å·¥å‚å¹³å°ï¼Œå·¥å‚å¯ä»¥äº«å—ä½ä½£é‡‘æ”¿ç­–ï¼Œå†·å¯åŠ¨é˜¶æ®µä»…æ”¶å–0.6%å›ºå®šä½£é‡‘ï¼Œç›¸æ¯”ä¼ ç»Ÿç”µå•†å¹³å°11%å·¦å³çš„ä½£é‡‘ï¼Œä¼˜æƒ å¹…åº¦æœ€é«˜å¯è¾¾95%ã€‚',
                    buttonText: 'äº†è§£ä½£é‡‘æ”¿ç­–'
                });
                
                addNodeInteractivity(svgDoc, 'platform', 'æ·˜å·¥å‚å¹³å°', 'è¿æ¥å·¥å‚ä¸æ¶ˆè´¹è€…çš„æ ¸å¿ƒå¹³å°ï¼Œæä¾›å•†å“å±•ç¤ºã€äº¤æ˜“æ’®åˆã€æ”¯ä»˜å¤„ç†ç­‰æœåŠ¡ã€‚', {
                    title: 'å¹³å°ç‰¹ç‚¹',
                    content: 'æ·˜å·¥å‚é‡‡ç”¨M2Cï¼ˆManufacturer-to-Consumerï¼‰æ¨¡å¼ï¼Œç›´æ¥å¯¹æ¥å·¥å‚å’Œæ¶ˆè´¹è€…ï¼Œå‡å°‘ä¸­é—´ç¯èŠ‚ï¼Œé™ä½æˆæœ¬ï¼Œæé«˜æ•ˆç‡ã€‚å¹³å°æä¾›å…¨æµç¨‹æœåŠ¡ï¼ŒåŒ…æ‹¬å•†å“å±•ç¤ºã€è®¢å•å¤„ç†ã€æ”¯ä»˜å’Œç‰©æµå¯¹æ¥ã€‚',
                    buttonText: 'äº†è§£M2Cæ¨¡å¼'
                });
                
                addNodeInteractivity(svgDoc, 'consumer', 'æ¶ˆè´¹è€…', 'æ·˜å·¥å‚çš„ç»ˆç«¯ç”¨æˆ·ï¼Œå¯ä»¥ç›´æ¥ä»å·¥å‚è´­ä¹°ä¼˜è´¨ä½ä»·çš„å•†å“ã€‚', {
                    title: 'æ¶ˆè´¹è€…è·ç›Š',
                    content: 'é€šè¿‡æ·˜å·¥å‚å¹³å°ï¼Œæ¶ˆè´¹è€…å¯ä»¥è·å¾—æ›´ä¼˜æƒ çš„ä»·æ ¼ï¼Œå› ä¸ºå‡å°‘äº†ä¸­é—´ç¯èŠ‚çš„åŠ ä»·ã€‚åŒæ—¶ï¼Œç›´æ¥ä»å·¥å‚è´­ä¹°ä¹Ÿä¿è¯äº†å•†å“çš„è´¨é‡å’Œæ­£å“ä¿éšœã€‚',
                    buttonText: 'æŸ¥çœ‹å•†å“ç¤ºä¾‹'
                });
                
                addNodeInteractivity(svgDoc, 'logistics', 'ç‰©æµé…é€', 'è´Ÿè´£å°†å•†å“ä»å·¥å‚é…é€åˆ°æ¶ˆè´¹è€…æ‰‹ä¸­ï¼Œæ˜¯æ•´ä¸ªæµç¨‹çš„é‡è¦ç¯èŠ‚ã€‚', {
                    title: 'ç‰©æµç³»ç»Ÿ',
                    content: 'æ·˜å·¥å‚ä¸å¤šå®¶ç‰©æµå…¬å¸åˆä½œï¼Œæä¾›å¿«é€Ÿã€å¯é çš„é…é€æœåŠ¡ã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜çš„ç‰©æµæ–¹æ¡ˆï¼Œç¡®ä¿å•†å“åŠæ—¶é€è¾¾æ¶ˆè´¹è€…æ‰‹ä¸­ã€‚',
                    buttonText: 'æŸ¥çœ‹ç‰©æµè¯¦æƒ…'
                });
                
                addNodeInteractivity(svgDoc, 'payment', 'æ”¯ä»˜ç³»ç»Ÿ', 'å¤„ç†æ¶ˆè´¹è€…çš„æ”¯ä»˜è¯·æ±‚ï¼Œç¡®ä¿äº¤æ˜“å®‰å…¨å’Œèµ„é‡‘æµè½¬ã€‚', {
                    title: 'æ”¯ä»˜ä¿éšœ',
                    content: 'æ·˜å·¥å‚æä¾›å®‰å…¨ã€ä¾¿æ·çš„æ”¯ä»˜ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§æ”¯ä»˜æ–¹å¼ã€‚åŒæ—¶ï¼Œå¹³å°å®è¡Œæ‹…ä¿äº¤æ˜“ï¼Œåªæœ‰æ¶ˆè´¹è€…ç¡®è®¤æ”¶è´§åï¼Œè´§æ¬¾æ‰ä¼šè½¬ç»™å·¥å‚ï¼Œä¿éšœåŒæ–¹æƒç›Šã€‚',
                    buttonText: 'äº†è§£æ”¯ä»˜æµç¨‹'
                });
                
                // ä¸ºæµç¨‹è·¯å¾„æ·»åŠ äº¤äº’æ•ˆæœå’ŒåŠ¨ç”»
                addPathInteractivity(svgDoc);
                
                // è®¾ç½®æµç¨‹åŠ¨ç”»æ§åˆ¶
                setupFlowAnimation(svgDoc);
                
                // éšè—é”™è¯¯ä¿¡æ¯
                if (svgError) {
                    svgError.style.display = 'none';
                }
            } catch (error) {
                console.error('SVGåŠ è½½å¤±è´¥:', error);
                if (svgError) {
                    svgError.style.display = 'block';
                    svgError.textContent = `å›¾è¡¨åŠ è½½å¤±è´¥: ${error.message}`;
                }
                svgContainer.innerHTML = '';
            }
        }
        
        // è·å–èŠ‚ç‚¹æè¿°
        function getNodeDescription(nodeType) {
            const descriptions = {
                factory: 'ç”Ÿäº§åˆ¶é€ ä¸­å¿ƒï¼Œè´Ÿè´£äº§å“ç”Ÿäº§å’Œè´¨é‡æ§åˆ¶',
                platform: 'ç”µå•†å¹³å°ï¼Œæä¾›åœ¨çº¿äº¤æ˜“å’ŒæœåŠ¡æ”¯æŒ',
                consumer: 'ç»ˆç«¯æ¶ˆè´¹è€…ï¼Œäº«å—ä¼˜è´¨äº§å“å’ŒæœåŠ¡',
                logistics: 'ç‰©æµé…é€ä¸­å¿ƒï¼Œç¡®ä¿å¿«é€Ÿå‡†ç¡®é…é€',
                payment: 'æ”¯ä»˜ç³»ç»Ÿï¼Œæä¾›å®‰å…¨ä¾¿æ·çš„æ”¯ä»˜æœåŠ¡'
            };
            return descriptions[nodeType] || 'æš‚æ— æè¿°';
        }
        
        // æ˜¾ç¤ºèŠ‚ç‚¹è¯¦æƒ…
        function showNodeDetails(nodeType, nodeTitle) {
            const details = {
                factory: {
                    title: 'å·¥å‚èŠ‚ç‚¹è¯¦æƒ…',
                    content: `
                        <h3>${nodeTitle}</h3>
                        <ul>
                            <li>ç”Ÿäº§èƒ½åŠ›ï¼šæ—¥å‡5000ä»¶</li>
                            <li>è´¨æ£€æ ‡å‡†ï¼šISO9001è®¤è¯</li>
                            <li>å·¥äººæ•°é‡ï¼š200+</li>
                            <li>è®¾å¤‡è‡ªåŠ¨åŒ–ç‡ï¼š85%</li>
                        </ul>
                    `
                },
                platform: {
                    title: 'å¹³å°èŠ‚ç‚¹è¯¦æƒ…',
                    content: `
                        <h3>${nodeTitle}</h3>
                        <ul>
                            <li>æ—¥å‡è®¢å•ï¼š10000+</li>
                            <li>å•†å®¶æ•°é‡ï¼š500+</li>
                            <li>ç”¨æˆ·æ»¡æ„åº¦ï¼š98%</li>
                            <li>å¹³å°ä½£é‡‘ï¼š5%</li>
                        </ul>
                    `
                },
                consumer: {
                    title: 'æ¶ˆè´¹è€…èŠ‚ç‚¹è¯¦æƒ…',
                    content: `
                        <h3>${nodeTitle}</h3>
                        <ul>
                            <li>æœˆå‡æ¶ˆè´¹ï¼šï¿¥1000+</li>
                            <li>å¤è´­ç‡ï¼š65%</li>
                            <li>å¥½è¯„ç‡ï¼š95%</li>
                            <li>ä¼šå‘˜æƒç›Šï¼šä¸“äº«æŠ˜æ‰£</li>
                        </ul>
                    `
                },
                logistics: {
                    title: 'ç‰©æµèŠ‚ç‚¹è¯¦æƒ…',
                    content: `
                        <h3>${nodeTitle}</h3>
                        <ul>
                            <li>é…é€èŒƒå›´ï¼šå…¨å›½</li>
                            <li>æ—¶æ•ˆï¼š24-48å°æ—¶</li>
                            <li>å‡†æ—¶ç‡ï¼š99%</li>
                            <li>æŸåç‡ï¼š<0.1%</li>
                        </ul>
                    `
                },
                payment: {
                    title: 'æ”¯ä»˜èŠ‚ç‚¹è¯¦æƒ…',
                    content: `
                        <h3>${nodeTitle}</h3>
                        <ul>
                            <li>æ”¯ä»˜æ–¹å¼ï¼šå¤šæ ·åŒ–</li>
                            <li>äº¤æ˜“å®‰å…¨ï¼šSSLåŠ å¯†</li>
                            <li>å¤„ç†é€Ÿåº¦ï¼šç§’çº§</li>
                            <li>é€€æ¬¾æ—¶æ•ˆï¼š72å°æ—¶å†…</li>
                        </ul>
                    `
                }
            };
            
            const detail = details[nodeType];
            if (detail && nodeDetails) {
                nodeDetails.innerHTML = detail.content;
                nodeDetails.style.display = 'block';
            }
        }
        
        // å…³é—­è¯¦æƒ…é¢æ¿
        function setupCloseDetailsHandler() {
            const closeDetails = document.querySelector('.close-details');
            if (closeDetails) {
                closeDetails.addEventListener('click', function() {
                    const nodeDetails = document.getElementById('node-details');
                    if (nodeDetails) {
                        nodeDetails.style.display = 'none';
                        // ç§»é™¤æ‰€æœ‰èŠ‚ç‚¹çš„æ´»è·ƒçŠ¶æ€
                        const activeNodes = document.querySelectorAll('.node-active');
                        activeNodes.forEach(node => node.classList.remove('node-active'));
                    }
                });
            }
        }
        
        // ä¸ºèŠ‚ç‚¹æ·»åŠ äº¤äº’æ•ˆæœ
        function addNodeInteractivity(svgDoc, nodeId, title, description, details) {
            // æŸ¥æ‰¾functionèŠ‚ç‚¹
            const nodeUses = svgDoc.querySelectorAll(`use[href="#${nodeId}"]`);
            const tooltip = document.getElementById('tooltip');
            const nodeDetails = document.getElementById('node-details');
            
            nodeUses.forEach(node => {
                // é¼ æ ‡æ‚¬åœæ•ˆæœ
                node.addEventListener('mouseover', function(e) {
                    // é«˜äº®èŠ‚ç‚¹
                    this.classList.add('node-highlight');
                    
                    // æ˜¾ç¤ºæç¤ºæ¡†
                    tooltip.innerHTML = `<strong>${title}</strong><br>${description}`;
                    tooltip.style.display = 'block';
                    
                    // è®¡ç®—æç¤ºæ¡†ä½ç½®
                    const rect = this.getBoundingClientRect();
                    const containerRect = svgDoc.getBoundingClientRect();
                    
                    tooltip.style.left = (rect.left + rect.width/2 - containerRect.left - tooltip.offsetWidth/2 + window.scrollX) + 'px';
                    tooltip.style.top = (rect.top - containerRect.top - tooltip.offsetHeight - 10 + window.scrollY) + 'px';
                });
                
                node.addEventListener('mouseout', function() {
                    // ç§»é™¤é«˜äº®
                    this.classList.remove('node-highlight');
                    
                    // éšè—æç¤ºæ¡†
                    tooltip.style.display = 'none';
                });
                
                // ç‚¹å‡»æ˜¾ç¤ºè¯¦æƒ…
                node.addEventListener('click', function(e) {
                    // ç§»é™¤æ‰€æœ‰èŠ‚ç‚¹çš„æ´»è·ƒçŠ¶æ€
                    const activeNodes = svgDoc.querySelectorAll('.node-active');
                    activeNodes.forEach(n => n.classList.remove('node-active'));
                    
                    // æ·»åŠ å½“å‰èŠ‚ç‚¹çš„æ´»è·ƒçŠ¶æ€
                    this.classList.add('node-active');
                    
                    // æ˜¾ç¤ºè¯¦æƒ…é¢æ¿
                    if (nodeDetails && details) {
                        try {
                            nodeDetails.innerHTML = `
                                <div class="node-details-content">
                                    <span class="close-details">&times;</span>
                                    <h3>${details.title || 'èŠ‚ç‚¹è¯¦æƒ…'}</h3>
                                    <div class="content">${details.content || ''}</div>
                                    <div class="detail-actions">
                                        <button class="detail-btn">${details.buttonText || 'äº†è§£æ›´å¤š'}</button>
                                    </div>
                                </div>
                            `;
                            nodeDetails.style.display = 'block';
                            setupCloseDetailsHandler();
                            
                            // è¯¦æƒ…æŒ‰é’®ç‚¹å‡»äº‹ä»¶
                            try {
                                const detailBtn = nodeDetails.querySelector('.detail-btn');
                                if (detailBtn) {
                                    detailBtn.onclick = function() {
                                        // æ ¹æ®ä¸åŒèŠ‚ç‚¹æ‰§è¡Œä¸åŒæ“ä½œ
                                        if (nodeId === 'factory' || nodeId === 'platform') {
                                            const policyContainer = document.querySelector('.policy-container');
                                            if (policyContainer) {
                                                policyContainer.scrollIntoView({ behavior: 'smooth' });
                                            }
                                        } else if (nodeId === 'consumer') {
                                            const appScreenshot = document.querySelector('.app-screenshot');
                                            if (appScreenshot) {
                                                appScreenshot.scrollIntoView({ behavior: 'smooth' });
                                            }
                                        }
                                    };
                                }
                            } catch (error) {
                                console.error('è®¾ç½®è¯¦æƒ…æŒ‰é’®äº‹ä»¶å¤±è´¥:', error);
                            }
                        } catch (error) {
                            console.error('æ›´æ–°èŠ‚ç‚¹è¯¦æƒ…é¢æ¿å¤±è´¥:', error);
                        }
                    }
                    
                    // è®¾ç½®è¯¦æƒ…é¢æ¿ä½ç½®
                    const rect = this.getBoundingClientRect();
                    const containerRect = svgDoc.getBoundingClientRect();
                    
                    let leftPos = rect.left + rect.width/2 - containerRect.left - nodeDetails.offsetWidth/2 + window.scrollX;
                    let topPos = rect.bottom - containerRect.top + 20 + window.scrollY;
                    
                    // ç¡®ä¿è¯¦æƒ…é¢æ¿ä¸è¶…å‡ºå®¹å™¨è¾¹ç•Œ
                    if (leftPos < 0) leftPos = 10;
                    if (leftPos + nodeDetails.offsetWidth > containerRect.width) {
                        leftPos = containerRect.width - nodeDetails.offsetWidth - 10;
                    }
                    
                    nodeDetails.style.left = leftPos + 'px';
                    nodeDetails.style.top = topPos + 'px';
                    nodeDetails.style.display = 'block';
                    
                    // è®¾ç½®å…³é—­è¯¦æƒ…æŒ‰é’®ç‚¹å‡»äº‹ä»¶
                    const closeBtn = nodeDetails.querySelector('.close-details');
                    if (closeBtn) {
                        closeBtn.onclick = function() {
                            // å…³é—­è¯¦æƒ…é¢æ¿
                            nodeDetails.style.display = 'none';
                            // ç§»é™¤èŠ‚ç‚¹æ´»è·ƒçŠ¶æ€
                            node.classList.remove('node-active');
                        };
                    }
                });
            });
        }
        
        // ä¸ºæµç¨‹è·¯å¾„æ·»åŠ äº¤äº’æ•ˆæœ
        function addPathInteractivity(svgDoc) {
            // æŸ¥æ‰¾æ‰€æœ‰è·¯å¾„
            const paths = svgDoc.querySelectorAll('path');
            
            paths.forEach(path => {
                // æ·»åŠ åŠ¨ç”»æ•ˆæœ
                if (path.getAttribute('marker-end') === 'url(#arrowhead)') {
                    path.classList.add('path-animation');
                }
                
                // é¼ æ ‡æ‚¬åœæ•ˆæœ
                path.addEventListener('mouseover', function() {
                    this.classList.add('path-highlight');
                    
                    // è·å–è·¯å¾„æ—è¾¹çš„æ–‡æœ¬
                    const pathId = this.getAttribute('id');
                    if (pathId) {
                        const relatedText = svgDoc.querySelector(`text[for="${pathId}"]`);
                        if (relatedText) {
                            relatedText.style.fontWeight = 'bold';
                            relatedText.style.fill = '#4169E1';
                        }
                    }
                });
                
                path.addEventListener('mouseout', function() {
                    this.classList.remove('path-highlight');
                    
                    // æ¢å¤æ–‡æœ¬æ ·å¼
                    const pathId = this.getAttribute('id');
                    if (pathId) {
                        const relatedText = svgDoc.querySelector(`text[for="${pathId}"]`);
                        if (relatedText) {
                            relatedText.style.fontWeight = 'normal';
                            relatedText.style.fill = '#666666';
                        }
                    }
                });
            });
        }
        
        // æ”¿ç­–å¡ç‰‡ç‚¹å‡»æ•ˆæœ
        const policyCards = document.querySelectorAll('.policy-card');
        policyCards.forEach(card => {
            card.addEventListener('click', function() {
                // ç§»é™¤å…¶ä»–å¡ç‰‡çš„æ´»è·ƒçŠ¶æ€
                policyCards.forEach(c => c.classList.remove('active'));
                
                // æ·»åŠ å½“å‰å¡ç‰‡çš„æ´»è·ƒçŠ¶æ€
                this.classList.add('active');
                this.style.backgroundColor = '#f0e6ff';
                
                // æ·»åŠ ç‚¹å‡»åŠ¨ç”»
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = 'translateY(-5px)';
                    this.style.transition = 'transform 0.3s ease';
                }, 300);
            });
        });
        
        // å›¾ç‰‡æ¨¡æ€æ¡†åŠŸèƒ½
        const appScreenshot = document.getElementById('appScreenshot');
        const imageModal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        const closeModal = document.getElementById('closeModal');
        
        if(appScreenshot && imageModal && modalImage) {
            appScreenshot.addEventListener('click', function() {
                const imgSrc = this.querySelector('img').src;
                modalImage.src = imgSrc;
                imageModal.classList.add('active');
            });
            
            closeModal.addEventListener('click', function() {
                imageModal.classList.remove('active');
            });
            
            imageModal.addEventListener('click', function(e) {
                if(e.target === this) {
                    imageModal.classList.remove('active');
                }
            });
        }
    </script>
